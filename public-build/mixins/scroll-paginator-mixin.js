define(["jquery","underscore","backbone"],function(e,t,n){var r={initScrollable:function(t,n,r,i){var s=this;this.lastPage=!0,this.searchParams={p:0},this.resultHeight=r||50,this.$scrollable=e(t),this.$scrollContent=e(n),this.$scrollable.on("scroll",function(t){clearTimeout(e.data(this,"scrollTimer")),e.data(this,"scrollTimer",setTimeout(function(){s.updateAfterScrolled(t)},250))})},detectPageLimit:function(){return Math.ceil(this.$scrollable.height()/this.resultHeight/10)*10},resetPageParams:function(){return this.isLastPage=!1,this.searchParams.p=0,this.searchParams.l=this.detectPageLimit(),this},updateAfterScrolled:function(e){var t=this.$scrollable.scrollTop()+this.$scrollable.height()-this.$scrollContent.height();if(t>-50){if(!this.loadNextPage){console.error("View needs to implement loadNextPage()");return}this.loadNextPage()}}};return r});