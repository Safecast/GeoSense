define(["jquery","underscore","backbone","utils","views/featurettes-view","views/user-maps-view","views/data-library-dashboard-view","models/map"],function(e,t,n,r,i,s,o,u){var a=n.Router.extend({routes:{"":"homeRoute",dashboard:"dashboardRoute",login:"focusFirstInput",signup:"focusFirstInput"},focusFirstInput:function(){var t=e("input");t.length&&t[0].focus()},initCreateMapForm:function(){var t=this,n=e("input.map-title");e(".create-map").on("submit",function(t){n.focus();if(!n.val())return e(".alert.map-title").slideDown("fast").removeClass("hidden"),!1}),this.focusFirstInput()},homeRoute:function(){this.initCreateMapForm();var t=(new i).render();e(".featurettes").append(t.$el),t.fetchMaps(),this.focusFirstInput()},dashboardRoute:function(){this.initCreateMapForm();var t=(new s).render();e(".user-maps").append(t.$el),t.fetchMaps();var t=(new o).render();e(".data-collections").append(t.$el),t.resetPageParams().fetchResults(t.searchParams),this.focusFirstInput()}}),f=function(){r.initAjaxErrorNotification(),window.app=new a,n.history.start({pushState:!0,root:BASE_URL.replace(/^(.*:\/\/)?[^\/]*\/?/,""),silent:!1})||e("#app").html("page not found")};return{initialize:f}});