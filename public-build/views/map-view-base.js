define(["jquery","underscore","backbone","config","utils","text!templates/homepage.html","lib/color-gradient/color-gradient"],function(e,t,n,r,i,s,o){var u=n.View.extend({initialize:function(e){this.layers=[],this.vent=e.vent,t.bindAll(this,"geocodeAndSetMapLocation"),e.vent.bind("geocodeAndSetMapLocation",this.geocodeAndSetMapLocation),e.visibleMapArea&&(this.initialVisibleMapArea=e.visibleMapArea)},geocodeAndSetMapLocation:function(e){var t=this;geocoder=new google.maps.Geocoder,geocoder.geocode({address:e},function(n,r){console.log(n),r==google.maps.GeocoderStatus.OK?(n.type="google",t.setVisibleMapArea(n)):alert("Cannot find "+e+"! Status: "+r)})},renderMap:function(e,t){return this.initialVisibleMapArea&&(this.visibleAreaChangedInitially=!0,this.setVisibleMapArea(this.initialVisibleMapArea)),this},getVisibleMapArea:function(){return{bounds:null,zoom:null}},setVisibleMapArea:function(e){},visibleAreaChanged:function(e){var t=this;this.visibleAreaChangedInitially||app.navigate(app.genMapURIForVisibleArea(e)),this.visibleAreaChangedInitially=!1,console.log("visibleAreaChanged"),this.trigger("visibleAreaChanged")},attachLayer:function(e){this.layers.push(e),this.listenTo(e,"toggle:enabled",this.layerToggled),this.listenTo(e,"change",this.layerChanged);var t=e.featureCollection;this.listenTo(t,{reset:this.featureReset}),this.listenTo(t,"add",this.featureAdd),this.listenTo(t,"remove",this.featureRemove),this.listenTo(t,"change",this.featureChange),this.listenTo(e,"destroy",this.destroyLayer),this.featureReset(e.featureCollection)},layerToggled:function(e){},layerChanged:function(e){},drawLayer:function(e){},destroyLayer:function(e){console.log(this,this.layers),this.layers.splice(this.layers.indexOf(e),1),this.stopListening(e),this.stopListening(e.featureCollection)},featureReset:function(e,t){var n=this;e.each(function(e){n.featureAdd(e)}),n.drawLayer(e.mapLayer)},featureAdd:function(e,t,n){},featureRemove:function(e,t,n){},featureChange:function(e,t){}});return u});