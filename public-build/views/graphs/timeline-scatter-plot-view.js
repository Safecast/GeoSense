define(["jquery","underscore","backbone","config","utils","text!templates/scatter-plot.html","views/graphs/graph-view-base","d3"],function(e,t,n,r,i,s,o,u){var a=o.extend({className:"graph scatter-plot",events:{},initialize:function(e){var n=this,e=t.extend({renderAxes:!0},e);a.__super__.initialize.call(this,e),this.template=t.template(s)},renderGraph:function(){var e=this,t=this.model.getValFormatter();a.__super__.renderGraph.apply(this,arguments);var n=this.collection.models,r=t.unit||(this.model.getNumericField()||"").split(".").pop(),i=function(e){var t=e.getDatetimeVal(),t=t.min!=undefined?t.min:t;return t!=undefined?new Date(t):null},s=function(e){var n=e.getNumericVal(),n=n.avg!=undefined?n.avg:n;return t.convert(n)},o=function(e){return __("%(label)s: %(value)s",{value:t.format(e),label:r})},f=u.time.scale().range(this.getXRange()).domain(u.extent(n,i)),l=u.scale.linear().range(this.getYRange()).domain(u.extent(n,s));if(this.renderAxes){var c=u.svg.axis().scale(f).orient("bottom"),h=u.svg.axis().scale(l).tickFormat(function(e,t){return autoFormatNumber(e)}).orient("left");this.appendXAxis(c),this.appendYAxis(h,r)}return this.svg.selectAll("circle").data(n).enter().append("circle").attr("class","dot").attr("fill",function(e){return e.getRenderAttr().color}).attr("stroke",function(e){return e.getRenderAttr("strokeColor",function(){return strokeForColor(e.getRenderAttr("color"))})}).attr("cx",function(e){return f(i(e))}).attr("cy",function(e){return l(s(e))}).attr("r",function(e){return 3.5}).on("mouseover",function(t){e.showTooltip(this,o(s(t))),u.select(this).style("fill",t.getRenderAttr("hightlightColor",function(){return highlightForColor(t.getRenderAttr("color"))}))}).on("mouseout",function(e){u.select(this).style("fill",e.getRenderAttr("color"))}),this}});return a});