function init(){map=new OpenLayers.Map("map",{allOverlays:!0});var e=createLayers();map.addLayers(e),waterBodies=e[2],map.addControl(new OpenLayers.Control.SelectFeature(waterBodies,{hover:!0,autoActivate:!0})),map.addControl(new OpenLayers.Control.LayerSwitcher),OpenLayers.Request.GET({url:"tasmania/sld-tasmania.xml",success:complete})}function complete(e){sld=format.read(e.responseXML||e.responseText),buildStyleChooser(),setLayerStyles(),map.zoomToExtent(new OpenLayers.Bounds(143,-39,150,-45))}function createLayers(){var e=[{name:"Land",url:"tasmania/TasmaniaStateBoundaries.xml"},{name:"Roads",url:"tasmania/TasmaniaRoads.xml"},{name:"WaterBodies",url:"tasmania/TasmaniaWaterBodies.xml"},{name:"Cities",url:"tasmania/TasmaniaCities.xml"}],t=[];for(var n=0,r=e.length;n<r;++n)t.push(new OpenLayers.Layer.Vector(e[n].name,{protocol:new OpenLayers.Protocol.HTTP({url:e[n].url,format:new OpenLayers.Format.GML.v2}),strategies:[new OpenLayers.Strategy.Fixed],styleMap:new OpenLayers.StyleMap}));return t}function setLayerStyles(){for(var e in sld.namedLayers){var t=sld.namedLayers[e].userStyles,n;for(var r=0,i=t.length;r<i;++r){n=t[r];if(n.isDefault){map.getLayersByName(e)[0].styleMap.styles["default"]=n;break}}}waterBodies.styleMap.styles.select=sld.namedLayers.WaterBodies.userStyles[1]}function buildStyleChooser(){var e=sld.namedLayers.WaterBodies.userStyles,t=document.getElementById("style_chooser"),n,r;for(var i=0,s=e.length;i<s;++i)n=document.createElement("input"),n.type="radio",n.name="style",n.value=i,n.checked=i==0,n.onclick=function(){setStyle(this.value)},r=document.createElement("li"),r.appendChild(n),r.appendChild(document.createTextNode(e[i].title)),t.appendChild(r)}function setStyle(e){waterBodies.styleMap.styles["default"]=sld.namedLayers.WaterBodies.userStyles[e],waterBodies.redraw()}var map,sld,waterBodies,format=new OpenLayers.Format.SLD;