/* Copyright (c) 2006-2012 by OpenLayers Contributors (see authors.txt for 
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */

OpenLayers.Format.WFSDescribeFeatureType=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{xsd:"http://www.w3.org/2001/XMLSchema"},readers:{xsd:{schema:function(e,t){var n=[],r={},i={complexTypes:n,customTypes:r};this.readChildNodes(e,i);var s=e.attributes,o,u;for(var a=0,f=s.length;a<f;++a)o=s[a],u=o.name,u.indexOf("xmlns")==0?this.setNamespace(u.split(":")[1]||"",o.value):t[u]=o.value;t.featureTypes=n,t.targetPrefix=this.namespaceAlias[t.targetNamespace];var l,c;for(var a=0,f=n.length;a<f;++a)l=n[a],c=r[l.typeName],r[l.typeName]&&(l.typeName=c.name)},complexType:function(e,t){var n={typeName:e.getAttribute("name")};this.readChildNodes(e,n),t.complexTypes.push(n)},complexContent:function(e,t){this.readChildNodes(e,t)},extension:function(e,t){this.readChildNodes(e,t)},sequence:function(e,t){var n={elements:[]};this.readChildNodes(e,n),t.properties=n.elements},element:function(e,t){if(t.elements){var n={},r=e.attributes,i;for(var s=0,o=r.length;s<o;++s)i=r[s],n[i.name]=i.value;var u=n.type;u||(u={},this.readChildNodes(e,u),n.restriction=u,n.type=u.base);var a=u.base||u;n.localType=a.split(":").pop(),t.elements.push(n)}if(t.complexTypes){var u=e.getAttribute("type"),f=u.split(":").pop();t.customTypes[f]={name:e.getAttribute("name"),type:u}}},simpleType:function(e,t){this.readChildNodes(e,t)},restriction:function(e,t){t.base=e.getAttribute("base"),this.readRestriction(e,t)}}},readRestriction:function(e,t){var n=e.childNodes,r,i,s;for(var o=0,u=n.length;o<u;++o)r=n[o],r.nodeType==1&&(i=r.nodeName.split(":").pop(),s=r.getAttribute("value"),t[i]?(typeof t[i]=="string"&&(t[i]=[t[i]]),t[i].push(s)):t[i]=s)},read:function(e){typeof e=="string"&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e])),e&&e.nodeType==9&&(e=e.documentElement);var t={};return this.readNode(e,t),t},CLASS_NAME:"OpenLayers.Format.WFSDescribeFeatureType"});