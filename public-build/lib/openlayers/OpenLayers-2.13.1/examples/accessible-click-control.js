function init(){map=new OpenLayers.Map("map",{controls:[]});var e=new OpenLayers.Layer.WMS("OpenLayers WMS","http://vmap0.tiles.osgeo.org/wms/vmap0",{layers:"basic"});map.addLayers([e]),navigationControl=new OpenLayers.Control.KeyboardDefaults({observeElement:"map"}),map.addControl(navigationControl),queryControl=new OpenLayers.Control.KeyboardClick({observeElement:"map"}),map.addControl(queryControl),map.zoomToMaxExtent()}var map,navigationControl,queryControl;OpenLayers.Control.KeyboardClick=OpenLayers.Class(OpenLayers.Control,{initialize:function(e){OpenLayers.Control.prototype.initialize.apply(this,[e]);var t=this.observeElement||document;this.handler=new OpenLayers.Handler.KeyboardPoint(this,{done:this.onClick,cancel:this.deactivate},{observeElement:t}),OpenLayers.Event.observe(t,"keydown",OpenLayers.Function.bindAsEventListener(function(e){e.keyCode==73&&(this.active?this.deactivate():this.activate())},this))},onClick:function(e){alert("You clicked near "+e.x+" N, "+e.y+" E")},activate:function(){if(!OpenLayers.Control.prototype.activate.apply(this,arguments))return!1;var e=this.map.getControlsByClass("OpenLayers.Control.KeyboardDefaults")[0];return e&&e.deactivate(),!0},deactivate:function(){if(!OpenLayers.Control.prototype.deactivate.apply(this,arguments))return!1;var e=this.map.getControlsByClass("OpenLayers.Control.KeyboardDefaults")[0];return e&&e.activate(),!0}}),OpenLayers.Handler.KeyboardPoint=OpenLayers.Class(OpenLayers.Handler,{KEY_EVENTS:["keydown"],initialize:function(e,t,n){OpenLayers.Handler.prototype.initialize.apply(this,arguments),this.eventListener=OpenLayers.Function.bindAsEventListener(this.handleKeyEvent,this)},activate:function(){if(!OpenLayers.Handler.prototype.activate.apply(this,arguments))return!1;this.layer=new OpenLayers.Layer.Vector(this.CLASS_NAME),this.map.addLayer(this.layer),this.observeElement=this.observeElement||document;for(var e=0,t=this.KEY_EVENTS.length;e<t;e++)OpenLayers.Event.observe(this.observeElement,this.KEY_EVENTS[e],this.eventListener);return this.point||this.createFeature(),!0},deactivate:function(){if(!OpenLayers.Handler.prototype.deactivate.apply(this,arguments))return!1;for(var e=0,t=this.KEY_EVENTS.length;e<t;e++)OpenLayers.Event.stopObserving(this.observeElement,this.KEY_EVENTS[e],this.eventListener);return this.map.removeLayer(this.layer),this.destroyFeature(),!0},handleKeyEvent:function(e){switch(e.keyCode){case OpenLayers.Event.KEY_LEFT:this.modifyFeature(-3,0);break;case OpenLayers.Event.KEY_RIGHT:this.modifyFeature(3,0);break;case OpenLayers.Event.KEY_UP:this.modifyFeature(0,3);break;case OpenLayers.Event.KEY_DOWN:this.modifyFeature(0,-3);break;case OpenLayers.Event.KEY_RETURN:this.callback("done",[this.point.geometry.clone()]);break;case OpenLayers.Event.KEY_ESC:this.callback("cancel")}},modifyFeature:function(e,t){this.point||this.createFeature();var n=this.map.getResolution();this.point.geometry.x=this.point.geometry.x+e*n,this.point.geometry.y=this.point.geometry.y+t*n,this.callback("modify",[this.point.geometry,this.point,!1]),this.point.geometry.clearBounds(),this.drawFeature()},createFeature:function(){var e=this.map.getCenter(),t=new OpenLayers.Geometry.Point(e.lon,e.lat);this.point=new OpenLayers.Feature.Vector(t),this.callback("create",[this.point.geometry,this.point]),this.point.geometry.clearBounds(),this.layer.addFeatures([this.point],{silent:!0})},destroyFeature:function(){this.layer.destroyFeatures([this.point]),this.point=null},drawFeature:function(){this.layer.drawFeature(this.point,this.style)}});