function init(){map=new OpenLayers.Map({div:"map",projection:"EPSG:900913"});var e=new OpenLayers.Layer.OSM,t=new Array(26);for(var n=0;n<26;++n)t[n]="EPSG:900913:"+n;var r=new OpenLayers.Layer.WMTS({name:"zoning",url:"http://v2.suite.opengeo.org/geoserver/gwc/service/wmts/",layer:"medford:zoning",matrixSet:"EPSG:900913",matrixIds:t,format:"image/png",style:"_null",opacity:.7,isBaseLayer:!1}),i=new OpenLayers.Layer.WMTS({name:"building",url:"http://v2.suite.opengeo.org/geoserver/gwc/service/wmts/",layer:"medford:buildings",matrixSet:"EPSG:900913",matrixIds:t,format:"image/png",style:"_null",isBaseLayer:!1});map.addLayers([e,r,i]),control=new OpenLayers.Control.WMTSGetFeatureInfo({drillDown:!0,queryVisible:!0,eventListeners:{getfeatureinfo:function(e){var t,n=e.text.match(/<body[^>]*>([\s\S]*)<\/body>/);n&&!n[1].match(/^\s*$/)?t=n[1]:t="No "+e.layer.name+" features in that area.<br>";var r=e.xy.x+","+e.xy.y,i=popups[r];if(!i||!i.map)i=new OpenLayers.Popup.FramedCloud(r,map.getLonLatFromPixel(e.xy),null," ",null,!0,function(e){delete popups[this.id],this.hide(),OpenLayers.Event.stop(e)}),popups[r]=i,map.addPopup(i,!0);i.setContentHTML(i.contentHTML+t),i.show()}}}),map.addControl(control),control.activate(),map.addControl(new OpenLayers.Control.LayerSwitcher),map.setCenter(new OpenLayers.LonLat(-13678519,5212803),15);var s=document.getElementById("drill");s.checked=!0,s.onchange=function(){control.drillDown=s.checked}}OpenLayers.ProxyHost="proxy.cgi?url=";var map,control,popups={};OpenLayers.Popup.FramedCloud.prototype.maxSize=new OpenLayers.Size(350,200);