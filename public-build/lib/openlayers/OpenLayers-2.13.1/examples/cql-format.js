function loadFeatures(e){var t=(new OpenLayers.Format.GeoJSON).read(e);states.addFeatures(t)}function updateFilter(){var e;try{e=format.read(cql.value)}catch(t){output.value=t.message}return e&&(output.value="",rule.filter=e,states.redraw()),!1}var format=new OpenLayers.Format.CQL,rule=new OpenLayers.Rule({symbolizer:{fillColor:"#ff0000",strokeColor:"#ffcccc",fillOpacity:"0.5"}}),states=new OpenLayers.Layer.Vector("States",{styleMap:new OpenLayers.StyleMap({"default":new OpenLayers.Style(null,{rules:[rule]})})}),map=new OpenLayers.Map({div:"map",layers:[new OpenLayers.Layer.WMS("OpenLayers WMS","http://maps.opengeo.org/geowebcache/service/wms",{layers:"openstreetmap",format:"image/png"}),states],center:new OpenLayers.LonLat(-101,39),zoom:3}),cql=document.getElementById("cql"),output=document.getElementById("output");updateFilter();var form=document.getElementById("cql_form");form.onsubmit=updateFilter;