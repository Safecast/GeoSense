/*
 * This file has been edited substantially from the Rico-released
 * version by the OpenLayers development team.
 *  
 *  Copyright 2005 Sabre Airline Solutions  
 *  
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the
 *  License. You may obtain a copy of the License at
 *  
 *         http://www.apache.org/licenses/LICENSE-2.0  
 *  
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the * License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, * either express or
 * implied. See the License for the specific language governing
 * permissions * and limitations under the License.
 *
 */

OpenLayers.Console.warn("OpenLayers.Rico is deprecated"),OpenLayers.Rico=OpenLayers.Rico||{},OpenLayers.Rico.Corner={round:function(e,t){e=OpenLayers.Util.getElement(e),this._setOptions(t);var n=this.options.color;this.options.color=="fromElement"&&(n=this._background(e));var r=this.options.bgColor;this.options.bgColor=="fromParent"&&(r=this._background(e.offsetParent)),this._roundCornersImpl(e,n,r)},changeColor:function(e,t){e.style.backgroundColor=t;var n=e.parentNode.getElementsByTagName("span");for(var r=0;r<n.length;r++)n[r].style.backgroundColor=t},changeOpacity:function(e,t){var n=t,r="alpha(opacity="+t*100+")";e.style.opacity=n,e.style.filter=r;var i=e.parentNode.getElementsByTagName("span");for(var s=0;s<i.length;s++)i[s].style.opacity=n,i[s].style.filter=r},reRound:function(e,t){var n=e.parentNode.childNodes[0],r=e.parentNode.childNodes[2];e.parentNode.removeChild(n),e.parentNode.removeChild(r),this.round(e.parentNode,t)},_roundCornersImpl:function(e,t,n){this.options.border&&this._renderBorder(e,n),this._isTopRounded()&&this._roundTopCorners(e,t,n),this._isBottomRounded()&&this._roundBottomCorners(e,t,n)},_renderBorder:function(e,t){var n="1px solid "+this._borderColor(t),r="border-left: "+n,i="border-right: "+n,s="style='"+r+";"+i+"'";e.innerHTML="<div "+s+">"+e.innerHTML+"</div>"},_roundTopCorners:function(e,t,n){var r=this._createCorner(n);for(var i=0;i<this.options.numSlices;i++)r.appendChild(this._createCornerSlice(t,n,i,"top"));e.style.paddingTop=0,e.insertBefore(r,e.firstChild)},_roundBottomCorners:function(e,t,n){var r=this._createCorner(n);for(var i=this.options.numSlices-1;i>=0;i--)r.appendChild(this._createCornerSlice(t,n,i,"bottom"));e.style.paddingBottom=0,e.appendChild(r)},_createCorner:function(e){var t=document.createElement("div");return t.style.backgroundColor=this._isTransparent()?"transparent":e,t},_createCornerSlice:function(e,t,n,r){var i=document.createElement("span"),s=i.style;s.backgroundColor=e,s.display="block",s.height="1px",s.overflow="hidden",s.fontSize="1px";var o=this._borderColor(e,t);return this.options.border&&n==0?(s.borderTopStyle="solid",s.borderTopWidth="1px",s.borderLeftWidth="0px",s.borderRightWidth="0px",s.borderBottomWidth="0px",s.height="0px",s.borderColor=o):o&&(s.borderColor=o,s.borderStyle="solid",s.borderWidth="0px 1px"),!this.options.compact&&n==this.options.numSlices-1&&(s.height="2px"),this._setMargin(i,n,r),this._setBorder(i,n,r),i},_setOptions:function(e){this.options={corners:"all",color:"fromElement",bgColor:"fromParent",blend:!0,border:!1,compact:!1},OpenLayers.Util.extend(this.options,e||{}),this.options.numSlices=this.options.compact?2:4,this._isTransparent()&&(this.options.blend=!1)},_whichSideTop:function(){return this._hasString(this.options.corners,"all","top")?"":this.options.corners.indexOf("tl")>=0&&this.options.corners.indexOf("tr")>=0?"":this.options.corners.indexOf("tl")>=0?"left":this.options.corners.indexOf("tr")>=0?"right":""},_whichSideBottom:function(){return this._hasString(this.options.corners,"all","bottom")?"":this.options.corners.indexOf("bl")>=0&&this.options.corners.indexOf("br")>=0?"":this.options.corners.indexOf("bl")>=0?"left":this.options.corners.indexOf("br")>=0?"right":""},_borderColor:function(e,t){return e=="transparent"?t:this.options.border?this.options.border:this.options.blend?this._blend(t,e):""},_setMargin:function(e,t,n){var r=this._marginSize(t),i=n=="top"?this._whichSideTop():this._whichSideBottom();i=="left"?(e.style.marginLeft=r+"px",e.style.marginRight="0px"):i=="right"?(e.style.marginRight=r+"px",e.style.marginLeft="0px"):(e.style.marginLeft=r+"px",e.style.marginRight=r+"px")},_setBorder:function(e,t,n){var r=this._borderSize(t),i=n=="top"?this._whichSideTop():this._whichSideBottom();i=="left"?(e.style.borderLeftWidth=r+"px",e.style.borderRightWidth="0px"):i=="right"?(e.style.borderRightWidth=r+"px",e.style.borderLeftWidth="0px"):(e.style.borderLeftWidth=r+"px",e.style.borderRightWidth=r+"px"),this.options.border!=0&&(e.style.borderLeftWidth=r+"px",e.style.borderRightWidth=r+"px")},_marginSize:function(e){if(this._isTransparent())return 0;var t=[5,3,2,1],n=[3,2,1,0],r=[2,1],i=[1,0];return this.options.compact&&this.options.blend?i[e]:this.options.compact?r[e]:this.options.blend?n[e]:t[e]},_borderSize:function(e){var t=[5,3,2,1],n=[2,1,1,1],r=[1,0],i=[0,2,0,0];return this.options.compact&&(this.options.blend||this._isTransparent())?1:this.options.compact?r[e]:this.options.blend?n[e]:this.options.border?i[e]:this._isTransparent()?t[e]:0},_hasString:function(e){for(var t=1;t<arguments.length;t++)if(e.indexOf(arguments[t])>=0)return!0;return!1},_blend:function(e,t){var n=OpenLayers.Rico.Color.createFromHex(e);return n.blend(OpenLayers.Rico.Color.createFromHex(t)),n},_background:function(e){try{return OpenLayers.Rico.Color.createColorFromBackground(e).asHex()}catch(t){return"#ffffff"}},_isTransparent:function(){return this.options.color=="transparent"},_isTopRounded:function(){return this._hasString(this.options.corners,"all","top","tl","tr")},_isBottomRounded:function(){return this._hasString(this.options.corners,"all","bottom","bl","br")},_hasSingleTextChild:function(e){return e.childNodes.length==1&&e.childNodes[0].nodeType==3}};