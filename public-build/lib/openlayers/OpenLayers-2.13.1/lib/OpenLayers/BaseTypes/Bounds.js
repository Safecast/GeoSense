/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */

OpenLayers.Bounds=OpenLayers.Class({left:null,bottom:null,right:null,top:null,centerLonLat:null,initialize:function(e,t,n,r){OpenLayers.Util.isArray(e)&&(r=e[3],n=e[2],t=e[1],e=e[0]),e!=null&&(this.left=OpenLayers.Util.toFloat(e)),t!=null&&(this.bottom=OpenLayers.Util.toFloat(t)),n!=null&&(this.right=OpenLayers.Util.toFloat(n)),r!=null&&(this.top=OpenLayers.Util.toFloat(r))},clone:function(){return new OpenLayers.Bounds(this.left,this.bottom,this.right,this.top)},equals:function(e){var t=!1;return e!=null&&(t=this.left==e.left&&this.right==e.right&&this.top==e.top&&this.bottom==e.bottom),t},toString:function(){return[this.left,this.bottom,this.right,this.top].join(",")},toArray:function(e){return e===!0?[this.bottom,this.left,this.top,this.right]:[this.left,this.bottom,this.right,this.top]},toBBOX:function(e,t){e==null&&(e=6);var n=Math.pow(10,e),r=Math.round(this.left*n)/n,i=Math.round(this.bottom*n)/n,s=Math.round(this.right*n)/n,o=Math.round(this.top*n)/n;return t===!0?i+","+r+","+o+","+s:r+","+i+","+s+","+o},toGeometry:function(){return new OpenLayers.Geometry.Polygon([new OpenLayers.Geometry.LinearRing([new OpenLayers.Geometry.Point(this.left,this.bottom),new OpenLayers.Geometry.Point(this.right,this.bottom),new OpenLayers.Geometry.Point(this.right,this.top),new OpenLayers.Geometry.Point(this.left,this.top)])])},getWidth:function(){return this.right-this.left},getHeight:function(){return this.top-this.bottom},getSize:function(){return new OpenLayers.Size(this.getWidth(),this.getHeight())},getCenterPixel:function(){return new OpenLayers.Pixel((this.left+this.right)/2,(this.bottom+this.top)/2)},getCenterLonLat:function(){return this.centerLonLat||(this.centerLonLat=new OpenLayers.LonLat((this.left+this.right)/2,(this.bottom+this.top)/2)),this.centerLonLat},scale:function(e,t){t==null&&(t=this.getCenterLonLat());var n,r;t.CLASS_NAME=="OpenLayers.LonLat"?(n=t.lon,r=t.lat):(n=t.x,r=t.y);var i=(this.left-n)*e+n,s=(this.bottom-r)*e+r,o=(this.right-n)*e+n,u=(this.top-r)*e+r;return new OpenLayers.Bounds(i,s,o,u)},add:function(e,t){if(e==null||t==null)throw new TypeError("Bounds.add cannot receive null values");return new OpenLayers.Bounds(this.left+e,this.bottom+t,this.right+e,this.top+t)},extend:function(e){if(e)switch(e.CLASS_NAME){case"OpenLayers.LonLat":this.extendXY(e.lon,e.lat);break;case"OpenLayers.Geometry.Point":this.extendXY(e.x,e.y);break;case"OpenLayers.Bounds":this.centerLonLat=null;if(this.left==null||e.left<this.left)this.left=e.left;if(this.bottom==null||e.bottom<this.bottom)this.bottom=e.bottom;if(this.right==null||e.right>this.right)this.right=e.right;if(this.top==null||e.top>this.top)this.top=e.top}},extendXY:function(e,t){this.centerLonLat=null;if(this.left==null||e<this.left)this.left=e;if(this.bottom==null||t<this.bottom)this.bottom=t;if(this.right==null||e>this.right)this.right=e;if(this.top==null||t>this.top)this.top=t},containsLonLat:function(e,t){typeof t=="boolean"&&(t={inclusive:t}),t=t||{};var n=this.contains(e.lon,e.lat,t.inclusive),r=t.worldBounds;if(r&&!n){var i=r.getWidth(),s=(r.left+r.right)/2,o=Math.round((e.lon-s)/i);n=this.containsLonLat({lon:e.lon-o*i,lat:e.lat},{inclusive:t.inclusive})}return n},containsPixel:function(e,t){return this.contains(e.x,e.y,t)},contains:function(e,t,n){n==null&&(n=!0);if(e==null||t==null)return!1;e=OpenLayers.Util.toFloat(e),t=OpenLayers.Util.toFloat(t);var r=!1;return n?r=e>=this.left&&e<=this.right&&t>=this.bottom&&t<=this.top:r=e>this.left&&e<this.right&&t>this.bottom&&t<this.top,r},intersectsBounds:function(e,t){typeof t=="boolean"&&(t={inclusive:t}),t=t||{};if(t.worldBounds){var n=this.wrapDateLine(t.worldBounds);e=e.wrapDateLine(t.worldBounds)}else n=this;t.inclusive==null&&(t.inclusive=!0);var r=!1,i=n.left==e.right||n.right==e.left||n.top==e.bottom||n.bottom==e.top;if(t.inclusive||!i){var s=e.bottom>=n.bottom&&e.bottom<=n.top||n.bottom>=e.bottom&&n.bottom<=e.top,o=e.top>=n.bottom&&e.top<=n.top||n.top>e.bottom&&n.top<e.top,u=e.left>=n.left&&e.left<=n.right||n.left>=e.left&&n.left<=e.right,a=e.right>=n.left&&e.right<=n.right||n.right>=e.left&&n.right<=e.right;r=(s||o)&&(u||a)}if(t.worldBounds&&!r){var f=t.worldBounds,l=f.getWidth(),c=!f.containsBounds(n),h=!f.containsBounds(e);c&&!h?(e=e.add(-l,0),r=n.intersectsBounds(e,{inclusive:t.inclusive})):h&&!c&&(n=n.add(-l,0),r=e.intersectsBounds(n,{inclusive:t.inclusive}))}return r},containsBounds:function(e,t,n){t==null&&(t=!1),n==null&&(n=!0);var r=this.contains(e.left,e.bottom,n),i=this.contains(e.right,e.bottom,n),s=this.contains(e.left,e.top,n),o=this.contains(e.right,e.top,n);return t?r||i||s||o:r&&i&&s&&o},determineQuadrant:function(e){var t="",n=this.getCenterLonLat();return t+=e.lat<n.lat?"b":"t",t+=e.lon<n.lon?"l":"r",t},transform:function(e,t){this.centerLonLat=null;var n=OpenLayers.Projection.transform({x:this.left,y:this.bottom},e,t),r=OpenLayers.Projection.transform({x:this.right,y:this.bottom},e,t),i=OpenLayers.Projection.transform({x:this.left,y:this.top},e,t),s=OpenLayers.Projection.transform({x:this.right,y:this.top},e,t);return this.left=Math.min(n.x,i.x),this.bottom=Math.min(n.y,r.y),this.right=Math.max(r.x,s.x),this.top=Math.max(i.y,s.y),this},wrapDateLine:function(e,t){t=t||{};var n=t.leftTolerance||0,r=t.rightTolerance||0,i=this.clone();if(e){var s=e.getWidth();while(i.left<e.left&&i.right-r<=e.left)i=i.add(s,0);while(i.left+n>=e.right&&i.right>e.right)i=i.add(-s,0);var o=i.left+n;o<e.right&&o>e.left&&i.right-r>e.right&&(i=i.add(-s,0))}return i},CLASS_NAME:"OpenLayers.Bounds"}),OpenLayers.Bounds.fromString=function(e,t){var n=e.split(",");return OpenLayers.Bounds.fromArray(n,t)},OpenLayers.Bounds.fromArray=function(e,t){return t===!0?new OpenLayers.Bounds(e[1],e[0],e[3],e[2]):new OpenLayers.Bounds(e[0],e[1],e[2],e[3])},OpenLayers.Bounds.fromSize=function(e){return new OpenLayers.Bounds(0,e.h,e.w,0)},OpenLayers.Bounds.oppositeQuadrant=function(e){var t="";return t+=e.charAt(0)=="t"?"b":"t",t+=e.charAt(1)=="l"?"r":"l",t};