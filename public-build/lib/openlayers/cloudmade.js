OpenLayers.Layer.CloudMade=OpenLayers.Class(OpenLayers.Layer.TMS,{initialize:function(e,t){if(!t.key)throw"Please provide key property in options (your API key).";t=OpenLayers.Util.extend({attribution:"Data &copy; 2009 <a href='http://openstreetmap.org/'>OpenStreetMap</a>. Rendering &copy; 2009 <a href='http://cloudmade.com'>CloudMade</a>.",maxExtent:new OpenLayers.Bounds(-20037508.34,-20037508.34,20037508.34,20037508.34),maxResolution:156543.0339,units:"m",projection:"EPSG:900913",isBaseLayer:!0,numZoomLevels:19,displayOutsideMaxExtent:!0,wrapDateLine:!0,styleId:1},t);var n=[t.key,t.styleId,256].join("/")+"/",r=["http://a.tile.cloudmade.com/"+n,"http://b.tile.cloudmade.com/"+n,"http://c.tile.cloudmade.com/"+n],i=[e,r,t];OpenLayers.Layer.TMS.prototype.initialize.apply(this,i)},getURL:function(e){var t=this.map.getResolution(),n=Math.round((e.left-this.maxExtent.left)/(t*this.tileSize.w)),r=Math.round((this.maxExtent.top-e.top)/(t*this.tileSize.h)),i=this.map.getZoom(),s=Math.pow(2,i);if(r<0||r>=s)return"http://cloudmade.com/js-api/images/empty-tile.png";n=(n%s+s)%s;var o=this.url,u=i+"/"+n+"/"+r+".png";return o instanceof Array&&(o=this.selectUrl(u,o)),o+u},CLASS_NAME:"OpenLayers.Layer.CloudMade"});