define([],function(){var e=function(e,t){this.colors=[],this.gradientCache={};var t=t||{};if(e)for(var n=e.length-1;n>=0;n--){var r=parseInt(e[n].color[0]=="#"?e[n].color.replace("#","0x"):e[n].color),i=parseFloat(e[n].position);this.colors[n]={position:e[n].position,color:r,interpolation:t.interpolation||e[n].interpolation,channels:this.getChannels(r)}}this.colors.sort(function(e,t){return e.position-t.position})};e.prototype.getChannels=function(e){return[(e&16711680)>>16,(e&65280)>>8,e&255]};var t=function(e,t,n){return Math.round(t+(n-t)*e)};return e.prototype.interpolation={lerpRGB:function(n,r,i){var s=r.channels||e.prototype.getChannels(r.color),o=i.channels||e.prototype.getChannels(i.color);return(t(n,s[0],o[0])<<16)+(t(n,s[1],o[1])<<8)+t(n,s[2],o[2])},threshold:function(e,t,n){return e<1?t.color:n.color}},e.prototype.interpolation.default="lerpRGB",e.prototype.intColorAt=function(e,t){if(t){e=(e-e%t)/1;if(!this.gradientCache[t])this.gradientCache[t]={};else if(this.gradientCache[t][e]!=null)return this.gradientCache[t][e]}for(var n=this.colors.length-1;n>0;n--)if(this.colors[n].position<e)break;var r=n,i=n+1>=this.colors.length||this.colors[r].position>e?n:n+1,s=this.colors[i].position==this.colors[r].position?0:(e-this.colors[r].position)/(this.colors[i].position-this.colors[r].position),o=this.colors[r].interpolation;o?f=this.interpolation[o]:f=this.interpolation[this.interpolation.default];var u=f(s,this.colors[r],this.colors[i]);return t&&(this.gradientCache[t][e]=u),u},e.prototype.zeroPad=function(e,t){return(new Array(e.length<t?t+1-e.length:0)).join("0")+e},e.prototype.intToHexColor=function(e){return"#"+this.zeroPad(e.toString(16),6)},e.prototype.colorAt=function(e,t){return this.intToHexColor(this.intColorAt(e,t))},e});