module.exports=function(e){function a(e){return"dist/"+e.replace(/\.js$/,".min.js").replace(/ui\//,"minified/")}function f(e){return e.map(function(e){return"<strip_all_banners:"+e+">"})}function l(e){return e.replace(/.+\/(.+?)>?$/,"$1")}function c(e){var t=e&&e.map(l);return"/*! <%= pkg.title || pkg.name %> - v<%= pkg.version %> - <%= grunt.template.today('isoDate') %>\n<%= pkg.homepage ? '* ' + pkg.homepage + '\n' : '' %>* Includes: "+(e?t.join(", "):"<%= stripDirectory(grunt.task.current.file.src[1]) %>")+"\n"+"* Copyright <%= grunt.template.today('yyyy') %> <%= pkg.author.name %>;"+" Licensed <%= _.pluck(pkg.licenses, 'type').join(', ') %> */"}var t=["jquery.ui.core.js","jquery.ui.widget.js","jquery.ui.mouse.js","jquery.ui.draggable.js","jquery.ui.droppable.js","jquery.ui.resizable.js","jquery.ui.selectable.js","jquery.ui.sortable.js","jquery.ui.effect.js"],n=t.map(function(e){return"ui/"+e}).concat(e.file.expandFiles("ui/*.js").filter(function(e){return t.indexOf(e.substring(3))===-1})),r=e.file.expandFiles("ui/i18n/*.js"),i=["core","accordion","autocomplete","button","datepicker","dialog","menu","progressbar","resizable","selectable","slider","spinner","tabs","tooltip","theme"].map(function(e){return"themes/base/jquery.ui."+e+".css"}),s={"dist/jquery-ui.min.js":["<banner:meta.bannerAll>","dist/jquery-ui.js"],"dist/i18n/jquery-ui-i18n.min.js":["<banner:meta.bannerI18n>","dist/i18n/jquery-ui-i18n.js"]},o={"dist/jquery-ui.min.css":"dist/jquery-ui.css"},u={all:["dist/jquery-ui.js","dist/jquery-ui.min.js"]};n.concat(r).forEach(function(e){s[a(e)]=["<banner>",e]}),i.forEach(function(e){o["dist/"+e.replace(/\.css$/,".min.css").replace(/themes\/base\//,"themes/base/minified/")]=["<banner>","<strip_all_banners:"+e+">"]}),n.forEach(function(e){u[e]=[e,a(e)]}),e.loadNpmTasks("grunt-css"),e.loadNpmTasks("grunt-html"),e.loadNpmTasks("grunt-compare-size"),e.loadNpmTasks("grunt-junit"),e.loadNpmTasks("grunt-git-authors"),e.loadTasks("build/tasks"),e.registerHelper("strip_all_banners",function(t){return e.file.read(t).replace(/^\s*\/\*[\s\S]*?\*\/\s*/g,"")}),global.stripDirectory=l,e.initConfig({pkg:"<json:package.json>",files:{dist:"<%= pkg.name %>-<%= pkg.version %>",cdn:"<%= pkg.name %>-<%= pkg.version %>-cdn",themes:"<%= pkg.name %>-themes-<%= pkg.version %>"},meta:{banner:c(),bannerAll:c(n),bannerI18n:c(r),bannerCSS:c(i)},compare_size:u,concat:{ui:{src:["<banner:meta.bannerAll>",f(n)],dest:"dist/jquery-ui.js"},i18n:{src:["<banner:meta.bannerI18n>",r],dest:"dist/i18n/jquery-ui-i18n.js"},css:{src:["<banner:meta.bannerCSS>",f(i)],dest:"dist/jquery-ui.css"}},min:s,cssmin:o,htmllint:{all:e.file.expand(["demos/**/*.html","tests/**/*.html"]).filter(function(e){return!/(?:ajax\/content\d\.html|tabs\/data\/test\.html|tests\/unit\/core\/core\.html)/.test(e)})},copy:{dist:{src:["AUTHORS.txt","jquery-*.js","MIT-LICENSE.txt","README.md","grunt.js","package.json","*.jquery.json","ui/**/*","ui/.jshintrc","demos/**/*","themes/**/*","external/**/*","tests/**/*"],renames:{"dist/jquery-ui.js":"ui/jquery-ui.js","dist/jquery-ui.min.js":"ui/minified/jquery-ui.min.js","dist/i18n/jquery-ui-i18n.js":"ui/i18n/jquery-ui-i18n.js","dist/i18n/jquery-ui-i18n.min.js":"ui/minified/i18n/jquery-ui-i18n.min.js","dist/jquery-ui.css":"themes/base/jquery-ui.css","dist/jquery-ui.min.css":"themes/base/minified/jquery-ui.min.css"},dest:"dist/<%= files.dist %>"},dist_min:{src:"dist/minified/**/*",strip:/^dist/,dest:"dist/<%= files.dist %>/ui"},dist_css_min:{src:"dist/themes/base/minified/*.css",strip:/^dist/,dest:"dist/<%= files.dist %>"},dist_units_images:{src:"themes/base/images/*",strip:/^themes\/base\//,dest:"dist/"},dist_min_images:{src:"themes/base/images/*",strip:/^themes\/base\//,dest:"dist/<%= files.dist %>/themes/base/minified"},cdn:{src:["AUTHORS.txt","MIT-LICENSE.txt","ui/*.js","package.json"],renames:{"dist/jquery-ui.js":"jquery-ui.js","dist/jquery-ui.min.js":"jquery-ui.min.js","dist/i18n/jquery-ui-i18n.js":"i18n/jquery-ui-i18n.js","dist/i18n/jquery-ui-i18n.min.js":"i18n/jquery-ui-i18n.min.js","dist/jquery-ui.css":"themes/base/jquery-ui.css","dist/jquery-ui.min.css":"themes/base/minified/jquery-ui.min.css"},dest:"dist/<%= files.cdn %>"},cdn_i18n:{src:"ui/i18n/jquery.ui.datepicker-*.js",strip:"ui/",dest:"dist/<%= files.cdn %>"},cdn_i18n_min:{src:"dist/minified/i18n/jquery.ui.datepicker-*.js",strip:"dist/minified",dest:"dist/<%= files.cdn %>"},cdn_min:{src:"dist/minified/*.js",strip:/^dist\/minified/,dest:"dist/<%= files.cdn %>/ui"},cdn_min_images:{src:"themes/base/images/*",strip:/^themes\/base\//,dest:"dist/<%= files.cdn %>/themes/base/minified"},cdn_themes:{src:"dist/<%= files.themes %>/themes/**/*",strip:"dist/<%= files.themes %>",dest:"dist/<%= files.cdn %>"},themes:{src:["AUTHORS.txt","MIT-LICENSE.txt","package.json"],dest:"dist/<%= files.themes %>"}},zip:{dist:{src:"<%= files.dist %>",dest:"<%= files.dist %>.zip"},cdn:{src:"<%= files.cdn %>",dest:"<%= files.cdn %>.zip"},themes:{src:"<%= files.themes %>",dest:"<%= files.themes %>.zip"}},md5:{dist:{src:"dist/<%= files.dist %>",dest:"dist/<%= files.dist %>/MANIFEST"},cdn:{src:"dist/<%= files.cdn %>",dest:"dist/<%= files.cdn %>/MANIFEST"},themes:{src:"dist/<%= files.themes %>",dest:"dist/<%= files.themes %>/MANIFEST"}},qunit:{files:e.file.expandFiles("tests/unit/**/*.html").filter(function(e){return!/(all|index|test|dialog|dialog_deprecated|tabs|tooltip)\.html$/.test(e)})},lint:{ui:"ui/*.js",grunt:["grunt.js","build/**/*.js"],tests:"tests/unit/**/*.js"},csslint:{base_theme:{src:e.file.expandFiles("themes/base/*.css").filter(function(e){return!/(button|datepicker|core|dialog|theme)\.css$/.test(e)}),rules:{"adjoining-classes":!1,"import":!1,"outline-none":!1,"overqualified-elements":!1,"compatible-vendor-prefixes":!1}}},jshint:function(){function t(t){var n=e.file.readJSON((t||"")+".jshintrc"),r={options:n,globals:{}};return(n.predef||[]).forEach(function(e){r.globals[e]=!0}),delete n.predef,r}return{grunt:t(),ui:t("ui/"),tests:t("tests/")}}()}),e.registerTask("default","lint csslint htmllint qunit"),e.registerTask("sizer","concat:ui min:dist/jquery-ui.min.js compare_size:all"),e.registerTask("sizer_all","concat:ui min compare_size"),e.registerTask("build","concat min cssmin copy:dist_units_images"),e.registerTask("release","clean build copy:dist copy:dist_min copy:dist_min_images copy:dist_css_min md5:dist zip:dist"),e.registerTask("release_themes","release generate_themes copy:themes md5:themes zip:themes"),e.registerTask("release_cdn","release_themes copy:cdn copy:cdn_min copy:cdn_i18n copy:cdn_i18n_min copy:cdn_min_images copy:cdn_themes md5:cdn zip:cdn")};