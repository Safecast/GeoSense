module.exports=function(e){function a(e){return"dist/"+e.replace(/\.js$/,".min.js").replace(/ui\//,"minified/")}function f(t){return e.util._.pluck(e.file.expandMapping(t),"src").map(function(e){return e[0]})}function l(e){return e.replace(/.+\/(.+?)>?$/,"$1")}function c(e){var t=e&&e.map(l);return"/*! <%= pkg.title || pkg.name %> - v<%= pkg.version %> - <%= grunt.template.today('isoDate') %>\n<%= pkg.homepage ? '* ' + pkg.homepage + '\\n' : '' %>"+(e?"* Includes: "+t.join(", ")+"\n":"")+"* Copyright <%= grunt.template.today('yyyy') %> <%= pkg.author.name %>;"+" Licensed <%= _.pluck(pkg.licenses, 'type').join(', ') %> */\n"}var t=["jquery.ui.core.js","jquery.ui.widget.js","jquery.ui.mouse.js","jquery.ui.draggable.js","jquery.ui.droppable.js","jquery.ui.resizable.js","jquery.ui.selectable.js","jquery.ui.sortable.js","jquery.ui.effect.js"],n=t.map(function(e){return"ui/"+e}).concat(f("ui/*.js").filter(function(e){return t.indexOf(e.substring(3))===-1})),r=f("ui/i18n/*.js"),i=["core","accordion","autocomplete","button","datepicker","dialog","menu","progressbar","resizable","selectable","slider","spinner","tabs","tooltip","theme"].map(function(e){return"themes/base/jquery.ui."+e+".css"}),s={options:{preserveComments:!1},main:{options:{banner:c(n)},files:{"dist/jquery-ui.min.js":"dist/jquery-ui.js"}},i18n:{options:{banner:c(r)},files:{"dist/i18n/jquery-ui-i18n.min.js":"dist/i18n/jquery-ui-i18n.js"}}},o={options:{keepSpecialComments:0},main:{options:{keepSpecialComments:"*"},src:"dist/jquery-ui.css",dest:"dist/jquery-ui.min.css"}},u={all:["dist/jquery-ui.js","dist/jquery-ui.min.js"]};n.concat(r).forEach(function(e){s[e]={options:{banner:c()},files:{}},s[e].files[a(e)]=e}),i.forEach(function(e){o[e]={options:{banner:c()},src:e,dest:"dist/"+e.replace(/\.css$/,".min.css").replace(/themes\/base\//,"themes/base/minified/")}}),n.forEach(function(e){u[e]=[e,a(e)]}),e.loadNpmTasks("grunt-contrib-jshint"),e.loadNpmTasks("grunt-contrib-uglify"),e.loadNpmTasks("grunt-contrib-concat"),e.loadNpmTasks("grunt-contrib-qunit"),e.loadNpmTasks("grunt-contrib-csslint"),e.loadNpmTasks("grunt-contrib-cssmin"),e.loadNpmTasks("grunt-html"),e.loadNpmTasks("grunt-compare-size"),e.loadNpmTasks("grunt-git-authors"),e.loadTasks("build/tasks"),e.initConfig({pkg:e.file.readJSON("package.json"),files:{dist:"<%= pkg.name %>-<%= pkg.version %>",cdn:"<%= pkg.name %>-<%= pkg.version %>-cdn",themes:"<%= pkg.name %>-themes-<%= pkg.version %>"},compare_size:u,concat:{ui:{options:{banner:c(n),stripBanners:{block:!0}},src:n,dest:"dist/jquery-ui.js"},i18n:{options:{banner:c(r)},src:r,dest:"dist/i18n/jquery-ui-i18n.js"},css:{options:{banner:c(i),stripBanners:{block:!0}},src:i,dest:"dist/jquery-ui.css"}},uglify:s,cssmin:o,htmllint:{all:e.file.expand(["demos/**/*.html","tests/**/*.html"]).filter(function(e){return!/(?:ajax\/content\d\.html|tabs\/data\/test\.html|tests\/unit\/core\/core\.html)/.test(e)})},copy:{dist:{src:["AUTHORS.txt","jquery-*.js","MIT-LICENSE.txt","README.md","Gruntfile.js","package.json","*.jquery.json","ui/**/*","ui/.jshintrc","demos/**/*","themes/**/*","external/**/*","tests/**/*"],renames:{"dist/jquery-ui.js":"ui/jquery-ui.js","dist/jquery-ui.min.js":"ui/minified/jquery-ui.min.js","dist/i18n/jquery-ui-i18n.js":"ui/i18n/jquery-ui-i18n.js","dist/i18n/jquery-ui-i18n.min.js":"ui/minified/i18n/jquery-ui-i18n.min.js","dist/jquery-ui.css":"themes/base/jquery-ui.css","dist/jquery-ui.min.css":"themes/base/minified/jquery-ui.min.css"},dest:"dist/<%= files.dist %>"},dist_min:{src:"dist/minified/**/*",strip:/^dist/,dest:"dist/<%= files.dist %>/ui"},dist_css_min:{src:"dist/themes/base/minified/*.css",strip:/^dist/,dest:"dist/<%= files.dist %>"},dist_units_images:{src:"themes/base/images/*",strip:/^themes\/base\//,dest:"dist/"},dist_min_images:{src:"themes/base/images/*",strip:/^themes\/base\//,dest:"dist/<%= files.dist %>/themes/base/minified"},cdn:{src:["AUTHORS.txt","MIT-LICENSE.txt","ui/*.js","package.json"],renames:{"dist/jquery-ui.js":"jquery-ui.js","dist/jquery-ui.min.js":"jquery-ui.min.js","dist/i18n/jquery-ui-i18n.js":"i18n/jquery-ui-i18n.js","dist/i18n/jquery-ui-i18n.min.js":"i18n/jquery-ui-i18n.min.js"},dest:"dist/<%= files.cdn %>"},cdn_i18n:{src:"ui/i18n/jquery.ui.datepicker-*.js",strip:"ui/",dest:"dist/<%= files.cdn %>"},cdn_i18n_min:{src:"dist/minified/i18n/jquery.ui.datepicker-*.js",strip:"dist/minified",dest:"dist/<%= files.cdn %>"},cdn_min:{src:"dist/minified/*.js",strip:/^dist\/minified/,dest:"dist/<%= files.cdn %>/ui"},cdn_themes:{src:"dist/<%= files.themes %>/themes/**/*",strip:"dist/<%= files.themes %>",dest:"dist/<%= files.cdn %>"},themes:{src:["AUTHORS.txt","MIT-LICENSE.txt","package.json"],dest:"dist/<%= files.themes %>"}},zip:{dist:{src:"<%= files.dist %>",dest:"<%= files.dist %>.zip"},cdn:{src:"<%= files.cdn %>",dest:"<%= files.cdn %>.zip"},themes:{src:"<%= files.themes %>",dest:"<%= files.themes %>.zip"}},md5:{dist:{src:"dist/<%= files.dist %>",dest:"dist/<%= files.dist %>/MANIFEST"},cdn:{src:"dist/<%= files.cdn %>",dest:"dist/<%= files.cdn %>/MANIFEST"},themes:{src:"dist/<%= files.themes %>",dest:"dist/<%= files.themes %>/MANIFEST"}},qunit:{files:f("tests/unit/**/*.html").filter(function(e){return!/(all|index|test|dialog|dialog_deprecated|tabs|tooltip)\.html$/.test(e)})},jshint:{ui:{options:{jshintrc:"ui/.jshintrc"},files:{src:"ui/*.js"}},grunt:{options:{jshintrc:".jshintrc"},files:{src:["Gruntfile.js","build/**/*.js"]}},tests:{options:{jshintrc:"tests/.jshintrc"},files:{src:"tests/unit/**/*.js"}}},csslint:{base_theme:{src:"themes/base/*.css",options:{"adjoining-classes":!1,"box-model":!1,"compatible-vendor-prefixes":!1,"duplicate-background-images":!1,"import":!1,important:!1,"outline-none":!1,"overqualified-elements":!1,"text-indent":!1}}}}),e.registerTask("default",["lint","test"]),e.registerTask("lint",["jshint","csslint","htmllint"]),e.registerTask("test",["qunit"]),e.registerTask("sizer",["concat:ui","uglify:main","compare_size:all"]),e.registerTask("sizer_all",["concat:ui","uglify","compare_size"]),e.registerTask("build",["concat","uglify","cssmin","copy:dist_units_images"]),e.registerTask("release","clean build copy:dist copy:dist_min copy:dist_min_images copy:dist_css_min md5:dist zip:dist".split(" ")),e.registerTask("release_themes","release generate_themes copy:themes md5:themes zip:themes".split(" ")),e.registerTask("release_cdn","release_themes copy:cdn copy:cdn_min copy:cdn_i18n copy:cdn_i18n_min copy:cdn_themes md5:cdn zip:cdn".split(" "))};