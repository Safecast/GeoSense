define(["jquery","underscore","backbone","deepextend","deepmodel"],function(e,t,n){var r=n.DeepModel.extend({idAttribute:"_id",urlRoot:function(){return this.map.url()+"/layer"},initialize:function(e,t){this.map=t.map,this.pointCollection=t.pointCollection},getNormalizedColors:function(e){var n=[],e=e||this.attributes.options.colors;for(var r=0;r<e.length;r++){var i=e[r],s=parseFloat(i.position),o=(i.position||"")+"";isNaN(s)&&(s=1),n[r]=t.extend({},i,{position:o[o.length-1]=="%"?s/100:(s-this.attributes.pointCollection.minVal)/(this.attributes.pointCollection.maxVal-this.attributes.pointCollection.minVal)})}return n}});return r});