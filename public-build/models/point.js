define(["jquery","underscore","backbone"],function(e,t,n){var r=n.Model.extend({idAttribute:"_id",getRenderAttributes:function(){var e=this.collection.mapLayer,t=e.getLayerOptions(),n=e.getExtremes(),r=n.minVal,i=n.maxVal,s=this.get("val"),o=e.getNormalizedColors();s&&s.avg!=null&&(s=s.avg);var u=this.get("count"),a=(s-r)/(i-r),f=u/n.maxCount,l,c=s!=null?t.colorType:ColorType.SOLID,h;switch(c){case ColorType.SOLID:l=o[0].color;break;case ColorType.LINEAR_GRADIENT:case ColorType.PALETTE:var p;switch(t.featureColorAttr){case"count":l=e.colorAt(f);break;default:case"val.avg":l=e.colorAt(a)}}switch(t.featureSizeAttr){default:case"count":h=f;break;case"val.avg":h=a}return{color:l,darkerColor:multRGB(l,.75),min:r,max:i,model:this,data:{val:s,normVal:a,count:u},size:h}}});return r});