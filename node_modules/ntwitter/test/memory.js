var	sys = require('sys'),
	twitter = require('twitter');

var	count = 0,
	lastc = 0;

function tweet(data) {
	count++;
	if ( typeof data === 'string' )
		sys.puts(data);
	else if ( data.text && data.user && data.user.screen_name )
		sys.puts('"' + data.text + '" -- ' + data.user.screen_name);
	else if ( data.message )
		sys.puts('ERROR: ' + sys.inspect(data));
	else
		sys.puts(sys.inspect(data));
}

function memrep() {
	var rep = process.memoryUsage();
	rep.tweets = count - lastc;
	lastc = count;
	console.log(JSON.stringify(rep));
	// next report in 60 seconds
	setTimeout(memrep, 60000);
}

var twit = new twitter({
	consumer_key: '7qvSnSrhvjsk303fhOtSDg',
	consumer_secret: 'NKfINCJgnnuc7gCu5Tkx69OhkKFaWFmubChn1nK3uVw',
	access_token_key: '10425532-2AuLCxYMHjt8ECvrdVSaIclERaYezVsdVJLFx7wyt',
	access_token_secret: '6vX7aDY6WJjtYyokwkaLRS5FchC3f9I42gzTjRCpc'
})
twit.stream('statuses/filter', {'locations':'-122.75,36.8,-121.75,37.8,-74,40,-73,41'}, function(stream) {
      stream.on('data', function (data) {
        console.log(data);
     });
});